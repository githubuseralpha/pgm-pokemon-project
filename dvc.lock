schema: '2.0'
stages:
  prepare_data:
    cmd: python src/dataset.py --prepare
    deps:
    - path: src/dataset.py
      hash: md5
      md5: 483b497d78d9db37994c8f1d68ade4df
      size: 3044
    outs:
    - path: data/images
      hash: md5
      md5: 777ebe4a90f8e19c48440716328700fb.dir
      size: 60956576
      nfiles: 2503
  train_gan:
    cmd: python src/train_gan.py --dataroot data/images --config params.yaml
    deps:
    - path: data/images
      hash: md5
      md5: 777ebe4a90f8e19c48440716328700fb.dir
      size: 60956576
      nfiles: 2503
    - path: params.yaml
      hash: md5
      md5: b78d0a9cdd1f4fd8c2bf6276f7437ed3
      size: 1188
    - path: src/gan_dataset.py
      hash: md5
      md5: bc07ee8352c6ab44a9dbbae91a16cc77
      size: 3057
    - path: src/gan_models.py
      hash: md5
      md5: 03488f78ab4bd096edd07faca18b3a6e
      size: 2939
    - path: src/train_gan.py
      hash: md5
      md5: 8b75ecb5e671569fa4a808c05b258386
      size: 9546
    - path: src/unified_metrics.py
      hash: md5
      md5: 7dcba56ca7eb192805c914b80bf91c41
      size: 7288
    params:
      params.yaml:
        gan:
          workers: 4
          batch_size: 128
          image_size: 128
          nc: 3
          nz: 100
          ngf: 128
          ndf: 64
          num_epochs: 1
          lr: 0.0002
          beta1: 0.5
          wandb_project: pokemon-gan
          wandb_run_name: gan-training
          seed: 42
    outs:
    - path: metrics/gan_metrics.json
      hash: md5
      md5: c41c5141811bd0087bfc26b9cbe34f65
      size: 169
    - path: models/gan_discriminator.pth
      hash: md5
      md5: f44198af34a5c8c1ead5e590d20a6778
      size: 11204276
    - path: models/gan_generator.pth
      hash: md5
      md5: e4b21244126152808c832487e06df6f9
      size: 51710155
  train_diffusion:
    cmd: python src/train_diff_models.py --dataroot data/images --config params.yaml
    deps:
    - path: data/images
      hash: md5
      md5: 777ebe4a90f8e19c48440716328700fb.dir
      size: 60956576
      nfiles: 2503
    - path: params.yaml
      hash: md5
      md5: ecef55f79a2b55f1f4db7dd0a61ba93f
      size: 1189
    - path: src/dataset.py
      hash: md5
      md5: 483b497d78d9db37994c8f1d68ade4df
      size: 3044
    - path: src/diff_models.py
      hash: md5
      md5: 0101b88a59ea2b49f3e9bba570f9877c
      size: 18695
    - path: src/train_diff_models.py
      hash: md5
      md5: 0107f4753142d155034b047926d74107
      size: 7390
    - path: src/unified_metrics.py
      hash: md5
      md5: d558595877c08a9f46dd011970f91d94
      size: 8229
    - path: src/visuals.py
      hash: md5
      md5: 4add5c77cce8528267b2e976cf5972a3
      size: 3543
    params:
      params.yaml:
        diffusion:
          batch_size: 8
          num_workers: 6
          epochs: 1
          lr: 0.0001
          num_timesteps: 1000
          image_size: 128
          save_interval: 10
          sample_batch_size: 48
          channels:
          - 64
          - 128
          - 256
          - 512
          - 1024
          layers_per_block: 2
          downblock: ResnetDownsampleBlock2D
          upblock: ResnetUpsampleBlock2D
          add_attention: true
          attention_head_dim: 64
          checkpoint_dir: checkpoints_diffusion
          output_dir: output_diffusion
          wandb_project: pokemon-diffusion
          wandb_run_name: ddpm-training
          seed: 42
    outs:
    - path: checkpoints_diffusion/
      hash: md5
      md5: fa4cacac4efa36c62f24fa0354987989.dir
      size: 960316886
      nfiles: 1
    - path: metrics/diffusion_metrics.json
      hash: md5
      md5: 4f9646ed44137b2bb5eaaf93a07caef6
      size: 196
    - path: output_diffusion/
      hash: md5
      md5: 506c564a924afc68a22fef9cc70d60c9.dir
      size: 11058122
      nfiles: 98
