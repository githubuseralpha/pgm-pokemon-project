schema: '2.0'
stages:
  prepare_data:
    cmd: python src/dataset.py --prepare --target-folder data/images --seed 42
    deps:
    - path: src/dataset.py
      hash: md5
      md5: 4c25246177058b2bacb0f2d5ced60da0
      size: 6823
    outs:
    - path: data/images/test
      hash: md5
      md5: 057c8c400e565ea232e27294202c9373.dir
      size: 6226864
      nfiles: 251
    - path: data/images/train
      hash: md5
      md5: 21f412e86b5ca4bddd29b216bf600a0e.dir
      size: 48486750
      nfiles: 2002
    - path: data/images/val
      hash: md5
      md5: 235eb2ab2d9f65da1cf479413c030b57.dir
      size: 6242962
      nfiles: 250
  train_gan:
    cmd: python src/train_gan.py --dataroot data/images --config params.yaml
    deps:
    - path: data/images/train
      hash: md5
      md5: 21f412e86b5ca4bddd29b216bf600a0e.dir
      size: 48486750
      nfiles: 2002
    - path: data/images/val
      hash: md5
      md5: 235eb2ab2d9f65da1cf479413c030b57.dir
      size: 6242962
      nfiles: 250
    - path: params.yaml
      hash: md5
      md5: f655ffbe03d9075eb6580a17a9903605
      size: 1255
    - path: src/gan_dataset.py
      hash: md5
      md5: bc07ee8352c6ab44a9dbbae91a16cc77
      size: 3057
    - path: src/gan_models.py
      hash: md5
      md5: 03488f78ab4bd096edd07faca18b3a6e
      size: 2939
    - path: src/train_gan.py
      hash: md5
      md5: 92c340611ef72fe31313cbea3be573e4
      size: 10274
    - path: src/unified_metrics.py
      hash: md5
      md5: 7c5b7e7bc6bb9b8c793a25e2cf6ad5db
      size: 7294
    params:
      params.yaml:
        gan:
          workers: 4
          batch_size: 128
          image_size: 128
          nc: 3
          nz: 100
          ngf: 128
          ndf: 64
          num_epochs: 5
          lr: 0.0002
          beta1: 0.5
          wandb_project: pokemon-gan
          wandb_run_name: gan-training
          seed: 42
    outs:
    - path: metrics/gan_metrics.json
      hash: md5
      md5: dc8de84db24320bfe59cf843a94ac4d3
      size: 168
    - path: models/gan_discriminator.pth
      hash: md5
      md5: 85917ca832df21d47b43c04e46673022
      size: 11204276
    - path: models/gan_generator.pth
      hash: md5
      md5: fc95aeb37b1a43b3545ec10da2537bdb
      size: 51710155
  train_diffusion:
    cmd: python src/train_diff_models.py --dataroot data/images --config params.yaml
    deps:
    - path: data/images/train
      hash: md5
      md5: 21f412e86b5ca4bddd29b216bf600a0e.dir
      size: 48486750
      nfiles: 2002
    - path: data/images/val
      hash: md5
      md5: 235eb2ab2d9f65da1cf479413c030b57.dir
      size: 6242962
      nfiles: 250
    - path: params.yaml
      hash: md5
      md5: f655ffbe03d9075eb6580a17a9903605
      size: 1255
    - path: src/dataset.py
      hash: md5
      md5: 4c25246177058b2bacb0f2d5ced60da0
      size: 6823
    - path: src/diff_models.py
      hash: md5
      md5: 0101b88a59ea2b49f3e9bba570f9877c
      size: 18695
    - path: src/train_diff_models.py
      hash: md5
      md5: d5fb90eb42b73f369f9330a38825655a
      size: 8887
    - path: src/unified_metrics.py
      hash: md5
      md5: 7c5b7e7bc6bb9b8c793a25e2cf6ad5db
      size: 7294
    - path: src/visuals.py
      hash: md5
      md5: 4add5c77cce8528267b2e976cf5972a3
      size: 3543
    params:
      params.yaml:
        diffusion:
          batch_size: 8
          num_workers: 6
          epochs: 1
          lr: 0.0001
          num_timesteps: 1000
          image_size: 128
          save_interval: 10
          sample_batch_size: 48
          channels:
          - 64
          - 128
          - 256
          - 512
          - 1024
          layers_per_block: 2
          downblock: ResnetDownsampleBlock2D
          upblock: ResnetUpsampleBlock2D
          add_attention: true
          attention_head_dim: 64
          checkpoint_dir: checkpoints_diffusion
          output_dir: output_diffusion
          wandb_project: pokemon-diffusion
          wandb_run_name: ddpm-training
          seed: 42
    outs:
    - path: checkpoints_diffusion/
      hash: md5
      md5: 3e298b17d2f20444d08691d9ac48ae01.dir
      size: 960316886
      nfiles: 1
    - path: metrics/diffusion_metrics.json
      hash: md5
      md5: 2dc72e6def44bdc750065d106df342f0
      size: 197
    - path: output_diffusion/
      hash: md5
      md5: fd9da9a26562605a610e4e22e5372b1e.dir
      size: 10879626
      nfiles: 98
